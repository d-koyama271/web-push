import{_ as p,v as d,x as i,t as b,q as g}from"./DqHbqJCT.js";const h={class:"container"},y={__name:"index",setup(f){const o=g(),s=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){alert("このブラウザはPush通知に対応していません。");return}try{const t=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l(o.public.vapidPublicKey)});console.log("Push Subscription:",t),await fetch(`${o.public.backendUrl}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),alert("通知を購読しました。")}catch(e){console.error("Subscription failed:",e),alert("通知の購読に失敗しました。")}},c=async()=>{try{await fetch(`${o.public.backendUrl}/sendNotification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"テスト通知",body:"これはテスト通知です。",icon:"icons/icon-192x192.png",badge:"icons/icon-192x192.png"})}),alert("通知を送信しました。")}catch(e){console.error("Error sending notification:",e),alert("通知の送信に失敗しました。")}};function l(e){const t="=".repeat((4-e.length%4)%4),u=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(u),a=new Uint8Array(r.length);for(let n=0;n<r.length;++n)a[n]=r.charCodeAt(n);return a}return(e,t)=>(b(),d("div",h,[t[0]||(t[0]=i("h1",null,"Web Push Demo",-1)),i("button",{onClick:s},"通知を購読"),i("button",{onClick:c},"通知を表示")]))}},m=p(y,[["__scopeId","data-v-91aa0559"]]);export{m as default};

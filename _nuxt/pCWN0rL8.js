import{_ as u,v as p,x as i,t as b,q as d}from"./hf4XqGyd.js";const g={class:"container"},f={__name:"index",setup(h){const a=d(),c=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){alert("このブラウザはPush通知に対応していません。");return}try{const e=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l(a.public.vapidPublicKey)});console.log("Push Subscription:",e),await fetch(`${a.public.backendUrl}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),alert("通知を購読しました。")}catch(t){console.error("Subscription failed:",t),alert("通知の購読に失敗しました。")}};function l(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),o=atob(n),s=new Uint8Array(o.length);for(let r=0;r<o.length;++r)s[r]=o.charCodeAt(r);return s}return(t,e)=>(b(),p("div",g,[e[1]||(e[1]=i("h1",null,"Web Push Demo",-1)),i("button",{onClick:c},"通知を購読"),i("button",{onClick:e[0]||(e[0]=(...n)=>t.triggerNotification&&t.triggerNotification(...n))},"通知を表示")]))}},_=u(f,[["__scopeId","data-v-059c3949"]]);export{_ as default};

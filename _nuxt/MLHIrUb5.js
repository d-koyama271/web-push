import{_ as p,v as g,x as o,t as d,q as b}from"./DJ_LAg8h.js";const y={class:"container"},v={__name:"index",setup(_){const a=b(),s=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){alert("このブラウザはPush通知に対応していません。");return}try{const e=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l(a.public.vapidPublicKey)});console.log("Push Subscription:",e),await fetch(`${a.public.backendUrl}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),alert("通知を購読しました。")}catch(t){console.error("Subscription failed:",t),alert("通知の購読に失敗しました。")}},c=async()=>{var e;if(!("serviceWorker"in navigator)){alert("このブラウザはService Workerに対応していません。");return}(e=(await navigator.serviceWorker.ready).active)==null||e.postMessage({type:"SHOW_NOTIFICATION",payload:{title:"こんにちは！",options:{body:"これはテスト通知です。",icon:"icons/icon-192x192.png",badge:"icons/icon-192x192.png"}}})};function l(t){const e="=".repeat((4-t.length%4)%4),u=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(u),i=new Uint8Array(n.length);for(let r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}return(t,e)=>(d(),g("div",y,[e[0]||(e[0]=o("h1",null,"Web Push Demo",-1)),o("button",{onClick:s},"通知を購読"),o("button",{onClick:c},"通知を表示")]))}},h=p(v,[["__scopeId","data-v-b468aa74"]]);export{h as default};
